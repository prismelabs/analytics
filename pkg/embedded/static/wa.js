(function(){var a,c=document.currentScript,e=location,t=c.dataset,g=new URL(c.src),d="no-referrer-when-downgrade",u="POST",v=e.protocol,r=t.prismeUrl||g.origin,o=t.domain||e.host,p=t.path||e.pathname,s=!!t.manual&&t.manual!=="false"||!1,f=t.visitorId,h=document.referrer.replace(e.host,o),m=1;function i(t){return t||(t={}),t.domain||(s?t.domain=e.host:t.domain=o),t.path||(s||m>1?t.path=e.pathname:t.path=p),t.visitorId||(t.visitorId=f),t.url=v.concat("//",t.domain,t.path,e.search),t}function l(e,t){return t["Access-Control-Max-Age"]=3600,t["X-Prisme-Referrer"]=e.url,e.visitorId&&(t["X-Prisme-Visitor-Id"]=e.visitorId.toString()),t}function n(e){e=i(e),fetch(r.concat("/api/v1/events/pageviews"),{method:u,headers:l(e,{"X-Prisme-Document-Referrer":h}),keepalive:!0,referrerPolicy:d}),h=e.url,m++}window.prisme={pageview:n,trigger(e,t,n){n=i(n),fetch(r.concat("/api/v1/events/custom/",e),{method:u,headers:l(n,{"Content-Type":"application/json"}),keepalive:!0,referrerPolicy:d,body:JSON.stringify(t)})}},s||(delete window.prisme.pageview,n(),window.history&&(a=window.history.pushState,window.history.pushState=function(){a.apply(window.history,arguments),n()},window.addEventListener("popstate",n)))})()