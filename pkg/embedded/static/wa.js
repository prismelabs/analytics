(function(){var l,x,d=document,k="addEventListener",E=d[k],C=document.currentScript,e=location,t=C.dataset,D=new URL(C.src),z=e.protocol,n=globalThis,u=n.fetch,a=n.history,s="visitorId",o="target",f=t.prismeUrl||D.origin,g=f.concat("/api/v1/events"),v=t.domain||e.host,A=t.path||e.pathname,r=!!t.manual&&t.manual!=="false"||!1,T=t[s],j=t.outboundLinks!=="false",y=t.fileDownloads!=="false",F=t.status||"200",w=d.referrer.replace(e.host,v),O=0,M="Request"in n&&"keepalive"in new Request(""),m=localStorage.getItem("prismeAnalytics.tracking.enable")==="false";function h(t){return t||(t={}),t.domain||(r?t.domain=e.host:t.domain=v),t.status||(t.status=F),t.path||(r||O>1?t.path=e.pathname:t.path=A),t[s]||(t[s]=T),t.url=z.concat("//",t.domain,t.path,e.search),t}function c(e,t){return t["X-Prisme-Referrer"]=e.url,e[s]&&(t["X-Prisme-Visitor-Id"]=e[s].toString()),t}function p(e){return Object.assign({},{method:"POST",referrerPolicy:"no-referrer-when-downgrade",keepalive:!0},e)}function S(e,t){if(e.defaultPrevented)return!1;var n=!t[o]||t[o].match(/^_(self|parent|top)$/i),s=!(e.ctrlKey||e.metaKey||e.shiftKey)&&e.type==="click";return n&&s}function i(e){if(m)return;O++,e=h(e),u(g.concat("/pageviews"),p({headers:c(e,{"X-Prisme-Document-Referrer":w,"X-Prisme-Status":e.status})})),w=e.url}function _(e,t,n){return m?Promise.resolve():(n=h(n),u(g.concat(e),p({headers:c(n,{}),body:t})))}function b(t){if(t.type==="auxclick"&&t.button!==1||!(t[o]instanceof Element))return;var s,a,r,i=t[o].closest("a");if(!i)return;if(s=new URL(i.href||"",e.origin),s.search="",j&&s.host!==e.host){a=!M&&S(t,s),r=!1;function c(){!r&&a&&(r=!0,n.location.assign(s))}a&&(t.preventDefault(),setTimeout(c,5e3)),_("/outbound-links",s).finally(c)}if(y&&i.getAttribute("download")!==null)return _("/file-downloads",s)}!r&&(j||y)&&(E("click",b),E("auxclick",b)),l={pageview:i,trigger(e,t,n){if(m)return;n=h(n),u(f.concat("/api/v1/events/custom/",e),p({headers:c(n,{"Content-Type":"application/json"}),body:JSON.stringify(t)}))}},n.prisme=l,d.querySelectorAll("a[ping]").forEach(function(e){e.ping=e.ping.split(" ").filter(e=>!e.includes(f)).join(" ")}),r||(delete l.pageview,i(),a&&(x=a.pushState,a.pushState=function(){x.apply(a,arguments),i()},n[k]("popstate",i)))})()