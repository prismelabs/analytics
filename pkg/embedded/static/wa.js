(function(){var d,b,l=document,v="addEventListener",k=l[v],E=document.currentScript,e=location,t=E.dataset,A=new URL(E.src),F=e.protocol,s=globalThis,p=s.fetch,r=s.history,n="visitorId",a="target",m=t.prismeUrl||A.origin,C=m.concat("/api/v1/events"),g=t.domain||e.host,S=t.path||e.pathname,i=!!t.manual&&t.manual!=="false"||!1,T=t[n],j=t.outboundLinks!=="false",y=t.fileDownloads!=="false",M=t.status||"200",w=l.referrer.replace(e.host,g),O=0,c=localStorage.getItem("prismeAnalytics.tracking.enable")==="false";function f(t){return t||(t={}),t.domain||(i?t.domain=e.host:t.domain=g),t.status||(t.status=M),t.path||(i||O>1?t.path=e.pathname:t.path=S),t[n]||(t[n]=T),t.url=F.concat("//",t.domain,t.path,e.search),t}function h(e,t){return t["X-Prisme-Referrer"]=e.url,e[n]&&(t["X-Prisme-Visitor-Id"]=e[n].toString()),t}function u(e){return Object.assign({},{method:"POST",referrerPolicy:"no-referrer-when-downgrade",keepalive:!0},e)}function z(e,t){if(e.defaultPrevented)return!1;var n=!t[a]||t[a].match(/^_(self|parent|top)$/i),s=!(e.ctrlKey||e.metaKey||e.shiftKey)&&e.type==="click";return n&&s}function o(e){if(c)return;O++,e=f(e),p(C.concat("/pageviews"),u({headers:h(e,{"X-Prisme-Document-Referrer":w,"X-Prisme-Status":e.status})})),w=e.url}function x(e,t,n){return c?Promise.resolve():(n=f(n),p(C.concat(e),u({headers:h(n,{}),body:t})))}function _(t){if(t.type==="auxclick"&&t.button!==1||!(t[a]instanceof Element))return;var n,s=t[a].closest("a");if(!s)return;if(n=new URL(s.href||"",e.origin),n.search="",j&&n.host!==e.host&&x("/outbound-links",n),y&&s.getAttribute("download")!==null)return x("/file-downloads",n)}!i&&(j||y)&&(k("click",_),k("auxclick",_)),d={pageview:o,trigger(e,t,n){if(c)return;n=f(n),p(m.concat("/api/v1/events/custom/",e),u({headers:h(n,{"Content-Type":"application/json"}),body:JSON.stringify(t)}))}},s.prisme=d,l.querySelectorAll("a[ping]").forEach(function(e){e.ping=e.ping.split(" ").filter(e=>!e.includes(m)).join(" ")}),i||(delete d.pageview,o(),r&&(b=r.pushState,r.pushState=function(){b.apply(r,arguments),o()},s[v]("popstate",o)))})()